proc setup {} {
    save_env
}


proc teardown {} {
    assert_env_unmodified
}


setup


assert_complete_any "unrar -"

assert_bash_exec ":>-a.rar"
assert_complete {a.rar} "unrar x -x@ -- -"

assert_bash_exec ":>c"
assert_complete {c} "unrar x -x@ -- foo.rar "

assert_bash_exec ":>b.part1.RAR; :>b.part2.RAR"
assert_complete {a.rar b.part1.RAR} "unrar x -x@ -- "

sync_after_int


teardown

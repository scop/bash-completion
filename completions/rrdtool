# bash completion for rrdtool                              -*- shell-script -*-

_rrdtool()
{
    local cur prev words cword
    _init_completion || return

    if ((${#words[@]} == 2)); then
        COMPREPLY=($(compgen -W 'create update updatev graph dump restore
            last lastupdate first info fetch tune resize xport' -- "$cur"))
    elif [[ ${words[1]} == "restore" ]]; then
        case "$prev" in
            restore | -*)
                _filedir xml
                ;;
            *.xml)
                ;;
            *)
                _filedir rrd
                ;;
        esac
    else
        _filedir rrd
    fi
} &&
    complete -F _rrdtool rrdtool

# ex: filetype=sh
